<!DOCTYPE html>
<html>
    <head>
        <title>Open Source Journal Matcher</title>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"> 
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    	<script>

		var source = new EventSource("/progress");
    	source.onmessage = function(event) {
	    	$('.progress-bar').css('width', event.data+'%').attr('aria-valuenow', event.data);
			$('.progress-bar-label').text(event.data+'%');

			if(event.data == 100){
				source.close()
			}
		}
		</script>
    </head>
    <body>
        <h1>Open Source Journal Matcher</h1>
        <form action="" method="POST" novalidate>
                {{ form.hidden_tag() }}
                <p>{{ form.web_abstract_var.label }} {{ form.web_abstract_var(size=32) }} {{ form.submit() }}</p>
        </form>
		<div class="progress" style="width: 50%; margin: 50px;">
			<div class="progress-bar active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
				<span class="progress-bar-label">0%</span>
			</div>
		</div>
		<ul style="list-style-type:none;">
				{% for item in output %}
				<li><strong>{{ "{0:.2f}".format(item) }}</strong> : {{ output[item][0] }}.  ISSN: {{ output[item][1] }}</li>
				{% endfor %}
		</ul>
    </body>
</html>
